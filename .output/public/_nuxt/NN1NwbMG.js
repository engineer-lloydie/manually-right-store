import{_ as ie}from"./UMxtOCdf.js";import{_ as O}from"./C-MEegRp.js";import{_ as ne}from"./7_8o665c.js";import{at as ce,c as de,S as ue,T as me,r as h,au as pe,x as ge,o as he,y as b,C as e,a as s,D as t,R as fe,q as _e,z as r,P as C,A as d,L as E,Q as H,ak as ye,B as m,ar as J,E as Q}from"./DjyUIBqy.js";import{u as be}from"./DBJqw5It.js";import{a as $,d as I,V as S,b as Ce,c as Ve,e as ve}from"./BCqAPvXo.js";import{V as we}from"./BWfbO7Mj.js";import{V as i}from"./hRWuLjem.js";import{V as D}from"./BspXmMnM.js";import{V as A,a as f}from"./CAbXb5K_.js";import{b as N}from"./BOtmwqbY.js";import{V}from"./db_tUPFg.js";import{V as Y}from"./DJfkV_z_.js";import{V as xe}from"./CL1s4hWW.js";import"./BO9Mla4O.js";/* empty css        */import"./CGXo02CJ.js";import"./BE2DUT4K.js";import"./CitD5sJV.js";import"./DbSzZ3QD.js";import"./-5Yw8DVk.js";import"./D4zY4o-O.js";import"./Uegu58lS.js";import"./DFaq2Itp.js";import"./DcfQ0Xww.js";const ke={class:"pt-0"},$e={class:"d-flex align-center justify-center fill-height"},Ie={class:"d-flex align-center justify-center fill-height"},Se={class:"font-weight-regular"},De={key:0,class:"font-weight-regular"},Ae={class:"d-flex align-center justify-center fill-height"},Ne="USD",G="ManuallyRight",ot={__name:"[product_slug]",async setup(Pe){var q,U,F,L,M;let _,P;const n=ce(),{$deslugify:v}=de(),K=_e(),u=ue(),{isAuthenticated:B,user:W}=me(),X=h([{title:"Home",disabled:!1,to:"/"},{title:"Main Categories",disabled:!1,to:"/manuals/categories"},{title:`${v(n.params.main_category_slug)}`,disabled:!1,to:`/manuals/categories/${n.params.main_category_slug}`},{title:`${v(n.params.sub_category_slug)}`,disabled:!1,to:`/manuals/categories/${n.params.main_category_slug}/${n.params.sub_category_slug}`},{title:`${v(n.params.product_slug)}`,disabled:!0}]),w=h("Download"),p=h(1),y=h(0),{data:Z,status:ee}=([_,P]=pe(()=>be("manualDetails",()=>$fetch(`${K.public.apiBaseUrl}/store/main-categories/sub-categories/manual-details`,{params:{urlSlug:n.params.product_slug}}))),_=await _,P(),_),a=((q=Z.value)==null?void 0:q.data)??{},te=((U=a.meta_tags)==null?void 0:U.title)||a.title,ae=((F=a.meta_tags)==null?void 0:F.description)||a.description,T=(M=(L=a.thumbnails)==null?void 0:L[0])==null?void 0:M.file_url,le=a.price||0,R=a.title,j=a.description;ge({title:te,meta:[{name:"description",content:ae},{property:"og:title",content:R},{property:"og:description",content:j},{property:"og:image",content:T},{property:"og:type",content:"product"}],script:[{type:"application/ld+json",children:JSON.stringify({"@context":"https://schema.org","@type":"Product",name:R,image:[T],description:j,brand:{"@type":"Brand",name:G},offers:{"@type":"Offer",priceCurrency:Ne,price:le,itemCondition:"https://schema.org/NewCondition",availability:"https://schema.org/InStock",seller:{"@type":"Organization",name:G}}})}]});const se=[1],z=async()=>{try{u.setNewAddedCart(!1),await u.addToCart({userId:B.value?W.value.id:null,guestId:B.value?null:localStorage.getItem("guestId"),manualId:a.id,price:parseFloat(a.price)*parseInt(p.value),quantity:p.value}),await u.fetchCartItems(),u.setNewAddedCart(!0)}catch(c){console.error(c)}},x=h([]),oe=async()=>{try{const c=await fe("store/related-products",{params:{subCategoryId:a.sub_category_id,manualId:a.id}});x.value=c,console.log(x.value)}catch(c){console.error(c)}};return he(()=>{oe()}),(c,o)=>{const re=ie;return r(),b("div",ke,[e(re,{items:s(X)},null,8,["items"]),e($,null,{default:t(()=>[e(I,null,{default:t(()=>[e(we,null,{default:t(()=>[s(ee)=="pending"?(r(),C(i,{key:0,class:"d-flex justify-center",cols:"12"},{default:t(()=>[e(D,{width:"100%",type:"image"}),e(D,{width:"100%",type:"text, subtitle"}),e(D,{width:"100%",type:"text, button"})]),_:1})):(r(),C(A,{key:1},{default:t(()=>[e(f,{cols:"12",sm:"6",md:"4",class:"d-flex align-center flex-column flex-wrap"},{default:t(()=>{var l;return[e(S,{src:(l=s(a).thumbnails[s(y)])==null?void 0:l.file_url,"lazy-src":O,width:"300",height:"300",rounded:"",cover:""},{placeholder:t(()=>[d("div",$e,[e(N,{color:"grey-lighten-4",indeterminate:""})])]),_:1},8,["src"]),e(i,{height:"30"}),e(i,null,{default:t(()=>[e($,null,{default:t(()=>[e(I,null,{default:t(()=>[e(A,null,{default:t(()=>[(r(!0),b(E,null,H(s(a).thumbnails,(k,g)=>(r(),C(f,{cols:"4",lg:"3",class:"pa-1",key:g},{default:t(()=>[e(V,{variant:s(y)==g?"outlined":null,height:"auto",width:"50",active:s(y)==g,onClick:Be=>y.value=g,class:"py-1"},{default:t(()=>[e(S,{"lazy-src":ne,src:k.file_url,width:"50",height:"auto"},{placeholder:t(()=>[d("div",Ie,[e(N,{color:"grey-lighten-4",indeterminate:""})])]),_:2},1032,["src"])]),_:2},1032,["variant","active","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]}),_:1}),e(f,{cols:"12",sm:"6",md:"4"},{default:t(()=>[d("h2",Se,m(s(a).title),1),e(i,{height:"30"}),d("h3",null,"$"+m(s(a).price),1),e(i,{height:"30"}),s(a).description?(r(),b("h3",De,m(s(a).description),1)):ye("",!0)]),_:1}),e(f,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(i,null,{default:t(()=>[e(Y,{modelValue:s(w),"onUpdate:modelValue":o[0]||(o[0]=l=>J(w)?w.value=l:null),label:"Please select",items:["Download"],variant:"outlined"},null,8,["modelValue"]),e(Y,{modelValue:s(p),"onUpdate:modelValue":o[1]||(o[1]=l=>J(p)?p.value=l:null),label:"Please select",items:se,variant:"outlined"},null,8,["modelValue"])]),_:1}),e(i,{class:"my-5"},{default:t(()=>[e(V,{width:"400",size:"large",color:"white",text:"Add to Cart","prepend-icon":"mdi-cart-check",elevation:"2",class:"bg-red-lighten-1 text-none",loading:s(u).addingCart,onClick:o[2]||(o[2]=l=>z())},null,8,["loading"])]),_:1})]),_:1})]),_:1})),e(xe,{class:"my-5"}),o[3]||(o[3]=d("h3",null,"You may also like ",-1)),e(i,null,{default:t(()=>[e(A,null,{default:t(()=>[(r(!0),b(E,null,H(s(x),(l,k)=>(r(),C(f,{key:k,cols:"12",sm:"6",md:"3"},{default:t(()=>[e($,{class:"ma-4","max-width":"350",width:"100%",height:"fit-content"},{default:t(()=>[e(S,{class:"align-end text-white ma-4",height:"320",src:l.thumbnail,"lazy-src":O,rounded:"",cover:""},{placeholder:t(()=>[d("div",Ae,[e(N,{color:"grey-lighten-4",indeterminate:""})])]),_:2},1032,["src"]),e(Ce,{class:"text-wrap text-h6"},{default:t(()=>[Q(m(l.title),1)]),_:2},1024),e(Ve,{class:"text-h6 font-weight-bold"},{default:t(()=>[Q(" $"+m(l.price),1)]),_:2},1024),e(I,null,{default:t(()=>[d("div",null,m(l.description),1)]),_:2},1024),e(ve,{class:"d-flex justify-end flex-column"},{default:t(()=>[e(V,{to:`/manuals/categories/${l.main_url_slug}/${l.sub_url_slug}/${l.url_slug}`,color:"white",text:"View Details","prepend-icon":"mdi-text-box-search-outline",elevation:"2",class:"bg-grey-darken-3 text-none",block:""},null,8,["to"]),e(V,{color:"white",text:"Add to Cart","prepend-icon":"mdi-cart-check",elevation:"2",class:"bg-red-lighten-1 text-none",block:"",loading:s(u).addingCart&&c.selectedItem===l.id,onClick:g=>z(l)},null,8,["loading","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}};export{ot as default};
