import{_ as z}from"./CEgSjpw1.js";import{_ as W}from"./Cs8jM3g8.js";import{q as $,S as L,r as k,T as R,o as F,R as I,s as V,y as O,C as r,D as a,z as b,A as u,P as E,ak as N,a as h,B as y}from"./CBDzwjNG.js";import{u as K}from"./CmbCKnPt.js";import{_ as M}from"./DlAUqK2U.js";import{V as Q}from"./C5pGw4VK.js";import{V as f}from"./CPLMrhBl.js";import{V as P,a as w,f as _}from"./DTwUWlhq.js";import{c as Z,b as A}from"./TA71G0v7.js";import{V as S}from"./BeALKx2S.js";import{V as C,a as x}from"./YqNUe72_.js";import{V as H,a as j}from"./DGaBPKS0.js";import{V as J}from"./BP1dA7mA.js";/* empty css        */import"./BK61ko1f.js";import"./Dn_vuwDJ.js";import"./CqBdadg_.js";import"./BE2DUT4K.js";/*!
 * paypal-js v8.2.0 (2025-01-23T17:26:53.747Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)t.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(n[s[l]]=e[s[l]]);return n}function X(e,t){var n=document.querySelector('script[src="'.concat(e,'"]'));if(n===null)return null;var s=T(e,t),l=n.cloneNode();if(delete l.dataset.uidAuto,Object.keys(l.dataset).length!==Object.keys(s.dataset).length)return null;var i=!0;return Object.keys(l.dataset).forEach(function(m){l.dataset[m]!==s.dataset[m]&&(i=!1)}),i?n:null}function Y(e){var t=e.url,n=e.attributes,s=e.onSuccess,l=e.onError,i=T(t,n);i.onerror=l,i.onload=s,document.head.insertBefore(i,document.head.firstElementChild)}function tt(e){var t=e.sdkBaseUrl,n=e.environment,s=G(e,["sdkBaseUrl","environment"]),l=t||at(n),i=s,m=Object.keys(i).filter(function(d){return typeof i[d]<"u"&&i[d]!==null&&i[d]!==""}).reduce(function(d,o){var p=i[o].toString();return o=et(o),o.substring(0,4)==="data"||o==="crossorigin"?d.attributes[o]=p:d.queryParams[o]=p,d},{queryParams:{},attributes:{}}),c=m.queryParams,v=m.attributes;return c["merchant-id"]&&c["merchant-id"].indexOf(",")!==-1&&(v["data-merchant-id"]=c["merchant-id"],c["merchant-id"]="*"),{url:"".concat(l,"?").concat(rt(c)),attributes:v}}function et(e){var t=function(n,s){return(s?"-":"")+n.toLowerCase()};return e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,t)}function rt(e){var t="";return Object.keys(e).forEach(function(n){t.length!==0&&(t+="&"),t+=n+"="+e[n]}),t}function at(e){return e==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function T(e,t){t===void 0&&(t={});var n=document.createElement("script");return n.src=e,Object.keys(t).forEach(function(s){n.setAttribute(s,t[s]),s==="data-csp-nonce"&&n.setAttribute("nonce",t["data-csp-nonce"])}),n}function nt(e,t){if(t===void 0&&(t=Promise),D(e,t),typeof document>"u")return t.resolve(null);var n=tt(e),s=n.url,l=n.attributes,i=l["data-namespace"]||"paypal",m=B(i);return l["data-js-sdk-library"]||(l["data-js-sdk-library"]="paypal-js"),X(s,l)&&m?t.resolve(m):ot({url:s,attributes:l},t).then(function(){var c=B(i);if(c)return c;throw new Error("The window.".concat(i," global variable is not available."))})}function ot(e,t){t===void 0&&(t=Promise),D(e,t);var n=e.url,s=e.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof s<"u"&&typeof s!="object")throw new Error("Expected attributes to be an object.");return new t(function(l,i){if(typeof document>"u")return l();Y({url:n,attributes:s,onSuccess:function(){return l()},onError:function(){var m=new Error('The script "'.concat(n,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return i(m)}})})}function B(e){return window[e]}function D(e,t){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");var n=e.environment;if(n&&n!=="production"&&n!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof t<"u"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}const st=()=>{const e=$();return{loadPayPal:async()=>await nt({clientId:e.public.paypalClientId,currency:"USD",intent:"capture"})}},lt={class:"mt-5"},it={key:0,class:"d-flex align-center justify-center fill-height"},ut={class:"font-weight-regular"},ct={class:"price-text-color text-right"},dt={class:"d-flex align-center justify-center fill-height"},ft={class:"mb-1"},mt={class:"font-weight-regular"},pt={class:"price-text-color text-right font-weight-medium"},ht={__name:"checkout",setup(e){const t=L(),n=K(),s=k(!0),{isAuthenticated:l,user:i}=R(),m=async()=>{await t.fetchCartItems(),t.totalCount||V("/")},c=k({}),v=()=>{if(l.value)c.value={firstName:i.value.first_name,emailAddress:i.value.email_address};else{const d=JSON.parse(localStorage.getItem("checkoutInformation"));c.value={firstName:d.first_name,emailAddress:d.email_address}}};return F(async()=>{m(),v(),s.value=!0;const{loadPayPal:d}=st();await d(),s.value=!1,window.paypal?window.paypal.Buttons({createOrder:async()=>{try{return(await I("/create-order",{method:"post",body:{cartIds:t.cartItems.map(p=>p.id)}})).orderID}catch(o){console.error("createOrder",o)}},async onApprove(o,p){try{const{transactionId:g}=await I("/capture-order",{method:"post",body:{orderID:o.orderID}}),{orderNumber:q}=await I("/complete-order",{method:"post",body:{cartIds:t.cartItems.map(U=>U.id),transactionId:g,userId:l.value?i.value.id:null,guestId:l.value?null:localStorage.getItem("guestId"),firstName:c.value.firstName,emailAddress:c.value.emailAddress}});n.setTransactionDetails({transactionId:g,totalPrice:t.totalPrice,orderNumber:q}),V("/payment-success");return}catch(g){console.error("onApprove",g)}},onError(o){console.error("PayPal error",o)}}).render("#paypal-button-container"):console.error("PayPal SDK failed to load.")}),(d,o)=>(b(),O("div",lt,[r(Q,{"max-width":"1300"},{default:a(()=>[r(f,{class:"d-flex mb-6 align-end justify-space-between"},{default:a(()=>[r(P,{src:z,"max-height":"100","max-width":"250",onClick:o[0]||(o[0]=p=>d.$router.push("/")),class:"cursor-pointer"}),r(f,{class:"d-flex align-center"},{default:a(()=>[r(Z,{icon:"mdi-shield-check",color:"grey-lighten-1",size:"40"}),o[1]||(o[1]=u("h2",{color:"grey-darken-3"},"Secure Checkout",-1))]),_:1})]),_:1}),r(S),r(f,{class:"mt-5"},{default:a(()=>[r(C,null,{default:a(()=>[r(x,{cols:"12",md:"7",lg:"7"},{default:a(()=>[r(w,{class:"my-5"},{default:a(()=>[r(_,{id:"checkout-information"},{default:a(()=>[r(f,null,{default:a(()=>o[2]||(o[2]=[u("h3",null,"Checkout Information",-1)])),_:1}),h(c)?(b(),E(H,{key:0,lines:"two"},{default:a(()=>[r(j,{title:"First Name:",disabled:""},{default:a(()=>[u("h4",null,y(h(c).firstName),1)]),_:1}),r(S),r(S),r(j,{title:"Email Address:",disabled:""},{default:a(()=>[u("h4",null,y(h(c).emailAddress),1)]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1}),r(w,{class:"my-5"},{default:a(()=>[r(_,{id:"payment"},{default:a(()=>[r(f,null,{default:a(()=>o[3]||(o[3]=[u("h3",null,"Payment",-1)])),_:1}),r(f,{class:"mt-6"},{default:a(()=>[h(s)?(b(),O("div",it,[r(A,{color:"grey-lighten-4",indeterminate:""})])):N("",!0),o[4]||(o[4]=u("div",{id:"paypal-button-container"},null,-1))]),_:1})]),_:1})]),_:1})]),_:1}),r(x,{xs:"12",md:"5",lg:"5"},{default:a(()=>[r(f,null,{default:a(()=>[r(w,{class:"my-5"},{default:a(()=>[r(_,null,{default:a(()=>[r(f,{class:"mb-5"},{default:a(()=>o[5]||(o[5]=[u("h3",null,"Payment Summary",-1)])),_:1}),r(C,null,{default:a(()=>[r(x,{class:"d-flex justify-space-between"},{default:a(()=>[o[6]||(o[6]=u("h4",{class:"font-weight-regular"},"Number of Item(s)",-1)),u("p",ut,y(h(t).totalCount),1)]),_:1})]),_:1}),r(S,{class:"my-5"}),r(C,null,{default:a(()=>[r(x,{class:"d-flex justify-space-between"},{default:a(()=>[o[7]||(o[7]=u("h4",{class:"font-weight-regular"},"Total Cost",-1)),u("h4",ct,"$"+y(h(t).totalPrice),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r(f,null,{default:a(()=>[r(w,{class:"my-5"},{default:a(()=>[r(_,null,{default:a(()=>[r(f,{class:"mb-5"},{default:a(()=>o[8]||(o[8]=[u("h3",null,"Item Summary",-1)])),_:1}),r(f,null,{default:a(()=>[h(t).totalCount==0?(b(),E(f,{key:0},{default:a(()=>o[9]||(o[9]=[u("p",{class:"text-center"},"No records found",-1)])),_:1})):(b(),E(J,{key:1,"max-height":"295","item-height":"50",items:h(t).cartItems},{default:a(({item:p})=>[r(j,{class:"pa-0 my-5"},{prepend:a(()=>[r(P,{src:p.thumbnail,"lazy-src":W,width:"50",height:"50",rounded:""},{placeholder:a(()=>[u("div",dt,[r(A,{color:"grey-lighten-4",indeterminate:""})])]),_:2},1032,["src"])]),append:a(()=>[u("h5",pt,"$"+y(p.price),1)]),default:a(()=>[r(f,{class:"ms-5"},{default:a(()=>[u("h5",ft,y(p.title),1),u("h5",mt,"Quantity: "+y(p.quantity),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["items"]))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]))}},Bt=M(ht,[["__scopeId","data-v-5e2b6648"]]);export{Bt as default};
