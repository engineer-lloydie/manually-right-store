import{u as Y,_ as Z}from"./UMxtOCdf.js";import{at as T,S as N,y as g,z as r,L as D,Q as B,P as x,D as t,C as e,a,A as _,B as h,E as k,T as ee,r as m,au as te,av as ae,c as le,l as se,o as oe,R as F,q as re,ar as L,am as z,aw as U}from"./DjyUIBqy.js";import{_ as H}from"./C-MEegRp.js";import{V as M,a as w}from"./CAbXb5K_.js";import{V as O,e as Q,a as P,b as ne,c as ie,d as ue}from"./BCqAPvXo.js";import{b as J,c as G}from"./BOtmwqbY.js";import{V as d}from"./hRWuLjem.js";import{V as y,a as de}from"./db_tUPFg.js";import{u as ce}from"./DBJqw5It.js";import{V as me}from"./BspXmMnM.js";import{V as ge}from"./BAAtWRKL.js";import"./BO9Mla4O.js";/* empty css        */const fe={class:"d-flex align-center justify-center fill-height"},pe={class:"text-wrap text-subtitle-1"},_e={class:"text-subtitle-1 font-weight-bold text-grey-darken-1"},he={__name:"list",props:{manualItems:{type:Array,default:()=>[]},selectedItem:{type:Number,default:null}},setup(f){const{isMobile:n}=Y(),c=T(),i=N();return(C,s)=>(r(),g("div",null,[(r(!0),g(D,null,B(f.manualItems,o=>(r(),x(P,{key:o.id,class:"my-4 mx-0 mx-sm-4",elevation:"5"},{default:t(()=>[e(M,{class:"pa-4"},{default:t(()=>[e(w,{cols:"4",sm:"6",md:"4"},{default:t(()=>[e(O,{class:"align-end text-white ma-4",height:a(n)?100:320,width:a(n)?100:"auto",alt:"Manual Thumbnail",src:o.thumbnail,"lazy-src":H,rounded:"",cover:""},{placeholder:t(()=>[_("div",fe,[e(J,{color:"grey-lighten-4",indeterminate:""})])]),_:2},1032,["height","width","src"])]),_:2},1024),e(w,{cols:"8",sm:"6",md:"4"},{default:t(()=>[_("p",pe,h(o.title),1),e(d,{height:"20"}),_("p",_e," $"+h(o.price),1),e(d,{height:"20"}),_("p",null,h(o.description),1)]),_:2},1024),e(w,{cols:"12",sm:"6",md:"4"},{default:t(()=>[e(d,{class:"my-5"},{default:t(()=>[e(Q,{class:"d-flex flex-column"},{default:t(()=>[e(y,{onClick:p=>C.$emit("addToCart",o),color:"white",text:"Add to Cart","prepend-icon":"mdi-cart-check",elevation:"2",class:"bg-red-lighten-1 text-none",width:"100%",loading:a(i).addingCart&&f.selectedItem===o.id},null,8,["onClick","loading"]),e(y,{to:`/manuals/categories/${a(c).params.main_category_slug}/${a(c).params.sub_category_slug}/${o.url_slug}`,color:"white",text:"View Details","prepend-icon":"mdi-text-box-search-outline",elevation:"2",width:"100%",class:"bg-grey-darken-3 text-none"},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]))}},ye={class:"d-flex align-center justify-center fill-height"},ve={__name:"card",props:{manualItems:{type:Array,default:()=>[]},selectedItem:{type:Number,default:null}},setup(f){const n=T(),c=N();return(i,C)=>(r(),g("div",null,[e(M,{class:"pa-4"},{default:t(()=>[(r(!0),g(D,null,B(f.manualItems,s=>(r(),x(w,{cols:"12",sm:"6",md:"4",lg:"4",class:"d-flex justify-sm-center",key:s.id},{default:t(()=>[e(P,{width:"100%",height:"fit-content",class:"pa-2",elevation:"5"},{default:t(()=>[e(O,{class:"align-end text-white ma-4",height:"320",alt:"Manual Thumbnail",src:s.thumbnail,"lazy-src":H,rounded:"",cover:""},{placeholder:t(()=>[_("div",ye,[e(J,{color:"grey-lighten-4",indeterminate:""})])]),_:2},1032,["src"]),e(ne,{class:"text-wrap text-subtitle-1"},{default:t(()=>[k(h(s.title),1)]),_:2},1024),e(ie,{class:"text-subtitle-1 font-weight-bold text-black"},{default:t(()=>[k(" $"+h(s.price),1)]),_:2},1024),e(ue,null,{default:t(()=>[_("div",null,h(s.description),1)]),_:2},1024),e(Q,{class:"d-flex flex-column"},{default:t(()=>[e(y,{onClick:o=>i.$emit("addToCart",s),color:"white",text:"Add to Cart","prepend-icon":"mdi-cart-check",elevation:"2",class:"bg-red-lighten-1 text-none",width:"100%",loading:a(c).addingCart&&f.selectedItem===s.id},null,8,["onClick","loading"]),e(y,{to:`/manuals/categories/${a(n).params.main_category_slug}/${a(n).params.sub_category_slug}/${s.url_slug}`,color:"white",text:"View Details","prepend-icon":"mdi-text-box-search-outline",elevation:"2",width:"100%",class:"bg-grey-darken-3 text-none"},null,8,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]))}},be={class:"pt-0"},xe={key:0,class:"text-center ma-16"},qe={__name:"index",async setup(f){let n,c;const i=T(),C=re(),{isAuthenticated:s,user:o}=ee(),p=m("card"),{data:v,status:we,error:Ce,refresh:Ie,clear:Ve}=([n,c]=te(()=>ce("subCategoryData",()=>F(`${C.public.apiBaseUrl}/store/main-categories/sub-category`,{method:"GET",params:{urlSlug:i.params.sub_category_slug}}))),n=await n,c(),n);ae({title:v.value.name,description:`Find high-quality catalogs available for ${v.value.name}.`,ogDescription:`Find high-quality catalogs available for ${v.value.name}.`,twitterCard:"summary_large_image"});const{$deslugify:j}=le(),I=m(1),K=m([{title:"Home",disabled:!1,to:"/"},{title:"Main Categories",disabled:!1,to:"/manuals/categories"},{title:`${j(i.params.main_category_slug)}`,disabled:!1,to:`/manuals/categories/${i.params.main_category_slug}`},{title:`${j(i.params.sub_category_slug)}`,disabled:!0}]),S=m(!0),V=m([]),E=m(0),$=N(),W=se(()=>Math.ceil(E.value/9)),R=async()=>{try{if(S.value=!0,v.value){const{data:u,total:l}=await F(`store/main-categories/sub-categories/${v.value.id}/manuals`,{method:"GET",params:{page:I.value,itemsPerPage:9}});E.value=l,V.value=u}}catch(u){console.error(u)}finally{S.value=!1}},A=m(null),q=async u=>{try{A.value=u.id,$.setNewAddedCart(!1),await $.addToCart({userId:s.value?o.value.id:null,guestId:s.value?null:localStorage.getItem("guestId"),manualId:u.id,price:Math.round((u.price+Number.EPSILON)*100)/100,quantity:1});const l={};s.value?l.userId=o.value.id:l.guestId=localStorage.getItem("guestId"),await $.fetchCartItems(l),$.setNewAddedCart(!0)}catch(l){console.error(l)}};return oe(async()=>{R()}),(u,l)=>{const X=Z;return r(),g("div",be,[e(X,{items:a(K)},null,8,["items"]),a(S)?(r(),x(d,{key:0,class:"d-flex justify-between ma-5",cols:"12"},{default:t(()=>[e(M,{class:"pa-4"},{default:t(()=>[(r(),g(D,null,B(3,b=>e(w,{cols:"12",sm:"6",md:"4",lg:"4",class:"d-flex justify-sm-center",key:b},{default:t(()=>[e(me,{elevation:"2",class:"ma-4",width:"100%",type:"card, text, actions"})]),_:2},1024)),64))]),_:1})]),_:1})):(r(),x(d,{key:1},{default:t(()=>[a(V).length?(r(),x(P,{key:1,class:"px-2"},{default:t(()=>[e(d,{class:"text-right"},{default:t(()=>[e(de,{modelValue:a(p),"onUpdate:modelValue":l[0]||(l[0]=b=>L(p)?p.value=b:null),variant:"outlined",color:"red-lighten-1",density:"comfortable",theme:"red-lighten-1",slim:"",class:"mt-6 mx-4"},{default:t(()=>[e(y,{value:"card"},{default:t(()=>[e(G,null,{default:t(()=>l[2]||(l[2]=[k("mdi-view-grid-outline")])),_:1})]),_:1}),e(y,{value:"list"},{default:t(()=>[e(G,null,{default:t(()=>l[3]||(l[3]=[k("mdi-view-list-outline")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:t(()=>[z(e(ve,{manualItems:a(V),selectedItem:a(A),onAddToCart:q},null,8,["manualItems","selectedItem"]),[[U,a(p)=="card"]]),z(e(he,{manualItems:a(V),selectedItem:a(A),onAddToCart:q},null,8,["manualItems","selectedItem"]),[[U,a(p)=="list"]])]),_:1})]),_:1})):(r(),g("p",xe,"No records found."))]),_:1})),e(d,{class:"mt-5 mb-10"},{default:t(()=>[e(ge,{"active-color":"red-lighten-1",elevation:"0",variant:"flat",density:"comfortable",modelValue:a(I),"onUpdate:modelValue":[l[1]||(l[1]=b=>L(I)?I.value=b:null),R],length:a(W),"total-visible":3},null,8,["modelValue","length"])]),_:1})])}}};export{qe as default};
